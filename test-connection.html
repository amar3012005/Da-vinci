<!DOCTYPE html>
<html>
<head>
    <title>API Connection Test</title>
</head>
<body>
    <h1>Testing API Connection</h1>
    <div id="results"></div>
    
    <script>
        async function testConnection() {
            const results = document.getElementById('results');
            
            // Test production API
            try {
                results.innerHTML += '<h2>Testing Production API (api.foodles.shop)</h2>';
                const response = await fetch('https://api.foodles.shop/health');
                const data = await response.json();
                results.innerHTML += `<p style="color: green;">✅ Production API Connected!</p>`;
                results.innerHTML += `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                results.innerHTML += `<p style="color: red;">❌ Production API Failed: ${error.message}</p>`;
            }
            
            // Test local API
            try {
                results.innerHTML += '<h2>Testing Local API (localhost:5000)</h2>';
                const response = await fetch('http://localhost:5000/health');
                const data = await response.json();
                results.innerHTML += `<p style="color: green;">✅ Local API Connected!</p>`;
                results.innerHTML += `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                results.innerHTML += `<p style="color: red;">❌ Local API Failed: ${error.message}</p>`;
            }
            
            // Show environment detection
            results.innerHTML += '<h2>Environment Detection</h2>';
            results.innerHTML += `<p>Current hostname: ${window.location.hostname}</p>`;
            results.innerHTML += `<p>Current protocol: ${window.location.protocol}</p>`;
            results.innerHTML += `<p>Current port: ${window.location.port}</p>`;
            
            // Show what API URL would be used in production
            const isProduction = window.location.hostname === 'foodles.shop' || window.location.hostname === 'www.foodles.shop';
            const apiUrl = isProduction ? 'https://api.foodles.shop' : 'http://localhost:5000';
            results.innerHTML += `<p><strong>API URL would be: ${apiUrl}</strong></p>`;
        }
        
        testConnection();
    </script>
</body>
</html>
